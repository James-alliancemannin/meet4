<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>meet4 — App</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#10b981',
            primaryDark: '#059669',
            accent: '#22c55e',
            accentSoft: '#ecfdf5',
            neutral: '#f8fafc',
            textDark: '#111827',
            textMuted: '#6b7280',
          }
        }
      }
    }
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <style> body { font-family: 'Inter', system-ui, sans-serif; } </style>
</head>

<body class="bg-neutral text-textDark">
  <div class="max-w-5xl mx-auto px-6 py-10">

    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
      <div>
        <h1 class="text-3xl font-bold">meet4 — app</h1>
        <p class="text-textMuted mt-1">This is your logged-in area. Next we’ll build events, maps, and hosting.</p>
      </div>

      <div class="flex gap-3">
        <a href="./index.html" class="px-5 py-3 rounded-xl border border-gray-300 hover:bg-white transition font-semibold">
          ← Back to landing
        </a>
        <button id="logout-btn" class="px-5 py-3 rounded-xl bg-textDark text-white hover:opacity-90 transition font-semibold">
          Log out
        </button>
      </div>
    </div>

    <div class="mt-8 bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
      <h2 class="text-xl font-semibold">Session</h2>
      <p id="session-line" class="mt-2 text-textMuted">Checking session…</p>
    </div>

    <div class="mt-6 grid md:grid-cols-2 gap-6">
      <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
        <h3 class="text-lg font-semibold mb-2">Next build (suggested)</h3>
        <ul class="list-disc pl-5 text-textMuted space-y-2">
          <li>Profiles table (display name, photo)</li>
          <li>Events table (title, location, time, tags)</li>
          <li>RLS policies (safe with public key)</li>
          <li>“Host an event” form</li>
          <li>Event feed (today / tomorrow)</li>
        </ul>
      </div>

      <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
        <h3 class="text-lg font-semibold mb-2">Notes</h3>
        <p class="text-textMuted">
          Payments/subscriptions stay web-first later (Stripe) if you want to avoid App Store commission.
          This page can evolve into your real web app.
        </p>
      </div>
    </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL = "https://hvzyndiuxivlwfjcvdls.supabase.co";
    const SUPABASE_KEY = "sb_publishable_GPbzWptNICdVPlKN-WllCQ_b5eGw83c";
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    const sessionLine = document.getElementById("session-line");
    const logoutBtn = document.getElementById("logout-btn");

    async function requireAuth() {
      const { data: { session } } = await supabase.auth.getSession();

      if (!session?.user) {
        // Not logged in — back to landing login tab
        window.location.href = "./index.html#login";
        return;
      }

      sessionLine.textContent = `Signed in as ${session.user.email}`;
    }

    logoutBtn.addEventListener("click", async () => {
      await supabase.auth.signOut();
      window.location.href = "./index.html#login";
    });

    requireAuth();
  </script>
</body>
</html>
