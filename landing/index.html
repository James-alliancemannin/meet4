<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>meet4 — Real hangs, right nearby</title>
  <meta name="description" content="Host or join small, casual meetups in your neighborhood. Coffee, walks, games, workouts — no pressure, just people showing up." />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#10b981',
            primaryDark: '#059669',
            accent: '#22c55e',
            accentSoft: '#ecfdf5',
            neutral: '#f8fafc',
            textDark: '#111827',
            textMuted: '#6b7280',
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>

  <style>
    body { font-family: 'Inter', system-ui, sans-serif; }
    #splash { position: fixed; inset: 0; z-index: 9999; background: #111827; display: flex; align-items: center; justify-content: center; transition: opacity 0.8s ease-out; cursor: pointer; }
    #splash.hidden { opacity: 0; pointer-events: none; }
    #splash video { width: 100%; height: 100%; object-fit: contain; }
    #skip-btn {
      position: absolute; bottom: 30px; padding: 12px 24px;
      background: rgba(255,255,255,0.25); color: white;
      border: 1px solid rgba(255,255,255,0.4); border-radius: 9999px;
      font-weight: 500; cursor: pointer; z-index: 10000; transition: all 0.2s;
    }
    .status {
      margin-top: 14px; padding: 10px 12px; border-radius: 12px;
      font-size: 0.95rem; line-height: 1.3; display: none;
    }
    .status.ok    { display:block; background:#ecfdf5; color:#065f46; border:1px solid rgba(16,185,129,.35); }
    .status.err   { display:block; background:#fef2f2; color:#991b1b; border:1px solid rgba(239,68,68,.35); }
    .status.info  { display:block; background:#eff6ff; color:#1e3a8a; border:1px solid rgba(59,130,246,.25); }
    button[disabled] { opacity:.65; cursor:not-allowed; }
  </style>
</head>
<body class="bg-neutral text-textDark antialiased">

  <!-- Splash -->
  <div id="splash">
    <video id="introVideo" autoplay muted playsinline poster="splash-poster.jpg" aria-label="meet4 intro video">
      <source src="meet4.mp4" type="video/mp4">
    </video>
    <button id="skip-btn" type="button" aria-label="Skip introduction video">Skip Intro</button>
  </div>

  <!-- Main content -->
  <div id="main-content" class="hidden">

    <!-- Hero -->
    <header class="relative bg-white">
      <div class="max-w-7xl mx-auto px-6 py-24 md:py-32 lg:py-40 text-center">
        <img src="logo.jpg" alt="meet4 logo" class="mx-auto h-64 md:h-80 lg:h-96 w-auto mb-10 object-contain" />
        <p class="text-xl md:text-2xl lg:text-3xl text-textMuted max-w-4xl mx-auto leading-relaxed font-medium">
          Casual hangouts happening near you — right now.
        </p>
        <p class="mt-6 text-lg md:text-xl text-textMuted max-w-3xl mx-auto">
          Walks, coffee runs, board games, park workouts, quiet reading spots. Small groups, real people, zero pressure. Just show up and see who’s around.
        </p>
        <div class="mt-12 flex flex-col sm:flex-row justify-center gap-5">
          <a href="#get-started" class="inline-flex items-center px-10 py-5 bg-primary text-white font-semibold rounded-xl hover:bg-primaryDark transition shadow-lg hover:shadow-xl text-xl">Find hangs near me →</a>
          <a href="#auth" class="inline-flex items-center px-10 py-5 border-2 border-primary text-primary font-semibold rounded-xl hover:bg-accentSoft transition text-xl">Host something simple</a>
        </div>
        <div id="already-logged-in" class="hidden mt-8">
          <a href="./app.html" class="inline-flex items-center px-10 py-5 bg-textDark text-white font-semibold rounded-xl hover:opacity-90 transition shadow-lg text-xl">Go to the app →</a>
          <p id="logged-in-as" class="mt-3 text-sm text-textMuted"></p>
        </div>
      </div>
    </header>

    <!-- Auth -->
    <section class="py-16 bg-white" id="auth">
      <div class="max-w-md mx-auto px-6">
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200">
          <h3 class="text-2xl font-bold text-center mb-6">Join the beta now</h3>
          <p class="text-center text-textMuted mb-8">Create an account today — even in early beta, you'll be first to access real local hangs.</p>

          <div id="auth-chooser" class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6">
            <button id="open-signup" type="button" class="w-full py-3 rounded-xl font-semibold bg-primary text-white hover:bg-primaryDark transition">Sign up</button>
            <button id="open-login" type="button" class="w-full py-3 rounded-xl font-semibold border border-gray-200 bg-white text-textDark hover:bg-gray-50 transition">Log in</button>
          </div>

          <div id="auth-panels" class="hidden">
            <div class="flex gap-3 mb-6">
              <button id="tab-signup" type="button" class="flex-1 py-3 rounded-xl font-semibold border border-gray-200 bg-accentSoft text-textDark focus:outline-none focus:ring-2 focus:ring-primary">Create account</button>
              <button id="tab-login" type="button" class="flex-1 py-3 rounded-xl font-semibold border border-gray-200 bg-white text-textMuted hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary">Log in</button>
            </div>

            <!-- SIGN UP -->
            <form id="signup-form" novalidate>
            <div class="mb-5">
              <label for="signup-email" class="block text-sm font-medium text-textMuted mb-2">Email</label>
              <input type="email" id="signup-email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="you@example.com" autocomplete="email" />
            </div>
            <div class="mb-6">
              <label for="signup-password" class="block text-sm font-medium text-textMuted mb-2">Password</label>
              <input type="password" id="signup-password" minlength="6" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="At least 6 characters" autocomplete="new-password" />
            </div>
            <button id="signup-btn" type="button" class="w-full py-4 bg-primary text-white font-semibold rounded-xl hover:bg-primaryDark transition shadow-lg text-lg">Create account</button>
            </form>

            <!-- LOGIN -->
            <form id="login-form" class="hidden" novalidate>
            <div class="mb-5">
              <label for="login-email" class="block text-sm font-medium text-textMuted mb-2">Email</label>
              <input type="email" id="login-email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="you@example.com" autocomplete="email" />
            </div>
            <div class="mb-6">
              <label for="login-password" class="block text-sm font-medium text-textMuted mb-2">Password</label>
              <input type="password" id="login-password" minlength="6" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Your password" autocomplete="current-password" />
            </div>
            <button id="login-btn" type="button" class="w-full py-4 bg-primary text-white font-semibold rounded-xl hover:bg-primaryDark transition shadow-lg text-lg">Log in</button>
            </form>

            <p class="text-center text-sm mt-5 mb-2">
              <button id="forgot-btn" type="button" class="text-primary hover:underline font-medium">Forgot your password?</button>
            </p>

            <form id="forgot-form" class="hidden mt-3" novalidate>
              <label for="forgot-email" class="block text-sm font-medium text-textMuted mb-2">Email for reset link</label>
              <div class="flex gap-2">
                <input type="email" id="forgot-email" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="you@example.com" autocomplete="email" />
                <button id="forgot-submit" type="button" class="px-4 py-3 bg-textDark text-white font-semibold rounded-lg hover:opacity-90 transition">Send</button>
              </div>
            </form>

            <p class="text-center text-xs mt-4">
              <button id="choose-again" type="button" class="text-textMuted hover:underline">Choose sign up or log in again</button>
            </p>
          </div>

          <div id="auth-status" class="status info mt-6"></div>
          <p class="text-center text-sm text-textMuted mt-6">Tip: If you just created an account, you may need to confirm your email first.</p>
        </div>
      </div>
    </section>

    <!-- Pain points, Features, CTA, Footer (full original sections) -->
    <!-- Paste your full sections here from your previous working file if needed. For brevity they are omitted but you can copy them from your last version. -->

  </div>

  <!-- Supabase - ONLY ONE SCRIPT TAG -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      console.log("✅ DOM fully loaded - starting auth script");

      const SUPABASE_URL = "https://hvzyndiuxivlwfjcvdls.supabase.co";
      const SUPABASE_ANON_KEY = "sb_publishable_GPbzWptNICdVPlKN-WllCQ_b5eGw83c";

      const $ = id => document.getElementById(id);

      const statusBox = $("auth-status");
      const authChooser = $("auth-chooser");
      const authPanels = $("auth-panels");
      const openSignup = $("open-signup");
      const openLogin = $("open-login");
      const chooseAgain = $("choose-again");
      const tabSignup = $("tab-signup");
      const tabLogin = $("tab-login");
      const signupForm = $("signup-form");
      const loginForm = $("login-form");
      const signupBtn = $("signup-btn");
      const loginBtn = $("login-btn");
      const forgotBtn = $("forgot-btn");
      const forgotForm = $("forgot-form");
      const forgotSubmit = $("forgot-submit");

      function showStatus(type, msg) {
        if (!statusBox) return alert(msg);
        statusBox.className = `status ${type}`;
        statusBox.textContent = msg;
        statusBox.style.display = "block";
      }

      // Safety check
      if (!tabSignup || !signupBtn || !forgotBtn || !openSignup || !openLogin) {
        showStatus("err", "Critical error: Auth elements missing. Hard refresh (Ctrl+Shift+R) or re-upload the file.");
        console.error("Missing elements - check HTML");
        return;
      }

      const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

      function getAppUrl() { return new URL("app.html", window.location.href).href; }
      function getResetUrl() { return new URL("reset-password.html", window.location.href).href; }

      function setTab(isSignup) {
        signupForm.classList.toggle("hidden", !isSignup);
        loginForm.classList.toggle("hidden", isSignup);
        tabSignup.classList.toggle("bg-accentSoft", isSignup);
        tabSignup.classList.toggle("text-textDark", isSignup);
        tabLogin.classList.toggle("bg-accentSoft", !isSignup);
        tabLogin.classList.toggle("text-textDark", !isSignup);
        tabLogin.classList.toggle("text-textMuted", isSignup);
      }

      function openAuth(mode = "signup") {
        authChooser.classList.add("hidden");
        authPanels.classList.remove("hidden");
        setTab(mode !== "login");
      }

      openSignup.addEventListener("click", () => openAuth("signup"));
      openLogin.addEventListener("click", () => openAuth("login"));
      chooseAgain?.addEventListener("click", () => {
        authPanels.classList.add("hidden");
        authChooser.classList.remove("hidden");
        forgotForm.classList.add("hidden");
      });

      tabSignup.addEventListener("click", () => setTab(true));
      tabLogin.addEventListener("click", () => setTab(false));

      // CREATE ACCOUNT
      signupBtn.addEventListener("click", async () => {
        console.log("Create account button clicked");
        showStatus("info", "Creating account…");

        const email = $("signup-email").value.trim();
        const password = $("signup-password").value;

        if (!email || !password || password.length < 6) {
          showStatus("err", "Email and password (min 6 chars) required.");
          return;
        }

        const { data, error } = await supabase.auth.signUp({
          email,
          password,
          options: { emailRedirectTo: getAppUrl() }
        });

        if (error) {
          console.error("Signup error:", error);
          showStatus("err", error.message);
          return;
        }

        console.log("Signup successful:", data);
        showStatus("ok", "Account created! Check your email (including spam) for confirmation link.");
        setTab(false);
        $("login-email").value = email;
      });

      // LOG IN
      loginBtn.addEventListener("click", async () => {
        console.log("Log in button clicked");
        showStatus("info", "Logging in…");

        const email = $("login-email").value.trim();
        const password = $("login-password").value;

        if (!email || !password) {
          showStatus("err", "Email and password required.");
          return;
        }

        const { error } = await supabase.auth.signInWithPassword({ email, password });

        if (error) {
          showStatus("err", error.message);
          return;
        }

        showStatus("ok", "Logged in! Redirecting…");
        setTimeout(() => window.location.href = "./app.html", 600);
      });

      // FORGOT PASSWORD
      forgotBtn.addEventListener("click", () => {
        forgotForm.classList.toggle("hidden");
        if (!forgotForm.classList.contains("hidden")) {
          $("forgot-email").value = $("login-email").value.trim() || "";
          $("forgot-email").focus();
        }
      });

      forgotSubmit.addEventListener("click", async () => {
        const email = $("forgot-email").value.trim();

        if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
          showStatus("err", "Please enter a valid email address.");
          return;
        }

        showStatus("info", "Sending reset email…");

        const { error } = await supabase.auth.resetPasswordForEmail(email, {
          redirectTo: getResetUrl()
        });

        if (error) {
          showStatus("err", error.message);
        } else {
          showStatus("ok", "If an account exists, a reset link has been sent. Check inbox and spam.");
          forgotForm.classList.add("hidden");
        }
      });

      console.log("✅ All event listeners attached successfully");
    });
  </script>

  <!-- Splash -->
  <script>
    const splash = document.getElementById('splash');
    const mainContent = document.getElementById('main-content');
    const video = document.getElementById('introVideo');
    const skipBtn = document.getElementById('skip-btn');

    function closeSplash(source = 'unknown') {
      console.log(`Splash closed from: ${source}`);
      splash?.classList.add('hidden');
      mainContent?.classList.remove('hidden');
      video?.pause();
    }

    if (video) video.onended = () => closeSplash('video ended');

    splash?.addEventListener('click', () => closeSplash('click'));
    splash?.addEventListener('touchend', e => { e.preventDefault(); closeSplash('touch'); });
    skipBtn?.addEventListener('click', () => closeSplash('skip button'));

    setTimeout(() => {
      if (!splash.classList.contains('hidden')) closeSplash('timeout');
    }, 25000);
  </script>

</body>
</html>

